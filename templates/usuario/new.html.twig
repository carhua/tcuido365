{% extends 'base.html.twig' %}
{% import 'macro/breadcrumb.html.twig' as breadcrumb %}
{% import 'macro/action.html.twig' as action %}

{% set _title = 'Usuario' %}
{% set _main_title = 'Nuevo' %}
{% set _section =  'usuario_index' %}

{% block _breadcrumb %}
    {{ breadcrumb.show2('Usuarios',_section,'Nuevo') }}
{% endblock %}

{% block _main %}
    <div class="alert alert-custom alert-light-danger mb-5" role="alert">
        <div class="alert-icon">
        <span class="svg-icon svg-icon-3x svg-icon-danger">
            <!--begin::Svg Icon | path:/metronic/theme/html/demo1/dist/assets/media/svg/icons/Code/Info-circle.svg-->
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                 height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect x="0" y="0" width="24" height="24"></rect>
                    <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10"></circle>
                    <rect fill="#000000" x="11" y="10" width="2" height="7" rx="1"></rect>
                    <rect fill="#000000" x="11" y="7" width="2" height="2" rx="1"></rect>
                </g>
            </svg>
            <!--end::Svg Icon-->
        </span>
        </div>
        <div class="alert-text font-weight-bold">
            La contraseña debe contener al menos:
            una letra Mayúscula,
            una letra Minúscula,
            un número,
            mínimo 8 caracteres
            <br>
            Ejemplo: Secret05, R3portar, MiClave1234, etc
        </div>
        <div class="alert-close">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">
                <i class="ki ki-close"></i>
            </span>
            </button>
        </div>
    </div>
    {{ include('usuario/_form.html.twig') }}
{% endblock %}

{% block _main_tools %}
    {% include 'crud/_options_ico.html.twig' %}
{% endblock %}

{% block _main_actions %}
    {% include 'crud/_new_links_ico.html.twig' with {'route_base':'usuario'} %}
{% endblock %}

{% block _body_tools_ico %}
    {% include 'crud/_new_links_tool.html.twig' with {'route_base': 'usuario'} %}
{% endblock %}

{% block _main_footer %}
    {% include 'crud/_new_links.html.twig' with {'route_base':'usuario'} %}
{% endblock %}

{% block _javascripts %}
    <script>
        jQuery(document).ready(function () {
            $('.m-select2').select2({placeholder:"Seleccione"});
            $('#usuario_centroPoblado').select2();
            $('#usuario_usuarioRoles').select2();

            $("#usuario_provincia").change(function () {
                var data = {
                    provincia_id: $(this).val()
                };
                $.ajax({
                    type: 'POST',
                    url: "{{ path('distrito_ajax') }}",
                    data: data,
                    success: function (data) {
                        var $selector = $('#usuario_distrito');
                        //alert(data);
                        $selector.html('<option>Seleccione Distrito</option>');
                        for (var i = 0, total = data.length; i < total; i++) {
                            $selector.append('<option value="' + data[i].id + '">' + data[i].name + '</option>');
                        }
                    }
                });
            });

            $("#usuario_distrito").change(function () {
                var data = {
                    distrito_id: $(this).val()
                };
                $.ajax({
                    type: 'POST',
                    url: "{{ path('centros_ajax') }}",
                    data: data,
                    success: function (data) {
                        var $selector = $('#usuario_centroPoblado');
                        //alert(data);
                        $selector.html('<option>Seleccione Centro Poblado</option>');
                        for (var i = 0, total = data.length; i < total; i++) {
                            $selector.append('<option value="' + data[i].id + '">' + data[i].name + '</option>');
                        }
                    }
                });
            });

        });
    </script>
{% endblock %}