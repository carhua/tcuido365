{########### BOTONES #################}
{% macro btn(title, icon, btn_class='default',attributes='') -%}
    <button class="btn btn-{{ btn_class }} m-btn m-btn--custom m-btn--icon {% if not title %}m-btn--icon-only{% endif %}" {{ attributes }}>
        {% if title %}<span>{% endif %}
            {% if icon %}<i class="fa flaticon-{{ icon }}"></i>{% endif %}
            {% if title %}<span>{{ title|trans }}</span>{% endif %}
            {% if title %}</span>{% endif %}
    </button>
{%- endmacro %}

{% macro btn_save(title, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn(title,'folder-2','warning', attributes) }}
{% endmacro %}

{% macro btn_link(label, link, icon, btn_class='default',attributes='', title='') %}
    <a href="{{ link }}" title="{{ title|trans }}"
       class="btn btn-sm btn-light-{{ btn_class }} {% if not label %}btn-icon mr-2{% endif %}" {{ attributes }}>
        {% if icon %}<i class="{{ icon }}"></i>{% endif %}
        {% if label %}{{ label|trans }}{% endif %}
    </a>
{% endmacro %}

{% macro btn_list_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.list',link,'flaticon-signs-1','dark', attributes) }}
{% endmacro %}

{% macro btn_new_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.new',link,'flaticon-list-1','success', attributes) }}
{% endmacro %}

{% macro btn_edit_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.edit',link,'flaticon-edit','warning', attributes) }}
{% endmacro %}

{% macro btn_print_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.print',link,'flaticon-technology','primary', attributes) }}
{% endmacro %}

{% macro btn_export_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.export',link,'fa fa-download','dark btn-export', attributes) }}
{% endmacro %}

{% macro btn_import_link(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link('lbl.import',link,'fa fa-upload','primary btn-import', attributes) }}
{% endmacro %}

{% macro btn_list_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link(null,link,'flaticon-signs-1','dark', attributes, 'lbl.list') }}
{% endmacro %}

{% macro btn_new_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link(null,link,'flaticon-list-1','success', attributes, 'lbl.new') }}
{% endmacro %}

{% macro btn_edit_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link(null,link,'flaticon-edit','warning', attributes, 'lbl.edit') }}
{% endmacro %}

{% macro btn_print_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link(null,link,'flaticon-technology','primary', attributes, 'lbl.print') }}
{% endmacro %}

{% macro btn_link_ico(link, icon, btn_class='default',attributes='', title='') %}
    <a href="{{ link }}" data-toggle="tooltip" title="{{ title|trans }}"
       class="btn btn-sm btn-light-{{ btn_class }} btn-icon mr-2" {{ attributes }}>
        <i class="{{ icon }}"></i>
    </a>
{% endmacro %}

{% macro btn_export_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link_ico(link,'fa fa-download','dark btn-export', attributes, 'lbl.export') }}
{% endmacro %}

{% macro btn_import_link_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link_ico(link,'fa fa-upload','primary btn-import', attributes, 'lbl.import') }}
{% endmacro %}

{% macro btn_delete_form(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de eliminar este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-light-danger btn-sm">
                <span>
                    <i class="fa flaticon-delete"></i>
                    <span>{{ 'lbl.delete'|trans }}</span>
                </span>
        </button>
    </form>
{% endmacro %}

{% macro btn_delete_form_ico(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de eliminar este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-light-danger btn-sm btn-icon mr-2" title="{{ 'lbl.delete'| trans }}">
            <i class="fa flaticon-delete"></i>
        </button>
    </form>
{% endmacro %}

{% macro btn_restore_form(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de restuarar este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-light-info btn-sm">
                <span>
                    <i class="fa fa-check"></i>
                    <span>{{ 'lbl.restore'|trans }}</span>
                </span>
        </button>
    </form>
{% endmacro %}

{% macro btn_restore_form_ico(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de resturar este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-light-info btn-sm btn-icon mr-2" data-toggle="tooltip" title="{{ 'lbl.restore'| trans }}">
            <i class="fa fa-check"></i>
        </button>
    </form>
{% endmacro %}

{% macro btn_delete_forever_form(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de eliminar definitivamente este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-outline-danger btn-sm">
                <span>
                    <i class="fa fa-trash"></i>
                    <span>{{ 'lbl.delete.forever'|trans }}</span>
                </span>
        </button>
    </form>
{% endmacro %}

{% macro btn_delete_forever_form_ico(link, token) %}
    <form method="post" action="{{ link }}" onsubmit="return confirm('Seguro de eliminar este registro?');"
          style="display: inline">
        <input type="hidden" name="_method" value="DELETE">
        <input type="hidden" name="_token" value="{{ token }}">
        <button class="btn btn-sm btn-icon btn-outline-danger mr-2" data-toggle="tooltip" title="{{ 'lbl.delete.forever'| trans }}">
            <i class="fa fa-trash"></i>
        </button>
    </form>
{% endmacro %}

{% macro btn_link2(label, link, icon, btn_class='default',attributes='', title='') %}
    <a href="{{ link }}" title="{{ title | trans }}"
       class="btn btn-hover-light-{{ btn_class }} btn-sm {% if not label %} btn-circle btn-icon{% endif %}" {{ attributes }}>
        {% if label %}<span>{% endif %}
            {% if icon %}<i class="fa flaticon-{{ icon }}"></i>{% endif %}
            {% if label %}<span>{{ label|trans }}</span>{% endif %}
            {% if label %}</span>{% endif %}
    </a>
{% endmacro %}

{% macro btn_show_link2(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link2('lbl.view',link,'search','info', attributes, 'lbl.view') }}
{% endmacro %}

{% macro btn_show_link2_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link2(null,link,'search','info', attributes, 'lbl.view') }}
{% endmacro %}

{% macro btn_edit_link2_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link2(null,link,'edit','warning', attributes, 'lbl.edit') }}
{% endmacro %}

{% macro btn_print_link2_ico(link, attributes='') %}
    {% import _self as actions %}
    {{ actions.btn_link2(null,link,'technology','primary', attributes, 'lbl.print') }}
{% endmacro %}

{# ########## FORMULARIOS ################# #}

{% macro frm_start(form, form_class='form') -%}
    {{ form_start(form, {attr: {class: form_class, id: form.vars.id, autocomplete: 'off'}}) }}
{%- endmacro %}

{% macro frm_end(form) -%}
    {{ form_rest(form) }}
    {{ form_errors(form) }}
    {{ form_end(form) }}
{%- endmacro %}

{% macro frm_field(value, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {{ actions.frm_label(value) }}
        <div class="{{ _class_horizontal_widget }}">
            {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget} }) }}
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{%- macro frm_label(value, class=null) -%}
    {% set label = value.vars.label %}
    {% if label is not same as(false) -%}
        {% set label_attr = {} %}

        {% if not value.vars.compound -%}
            {% set label_attr = label_attr|merge({'for': value.vars.id}) %}
        {%- endif -%}
        {% if class is null %} {% set class = _class_horizontal_label %} {% endif %}
        {% set label_attr = label_attr|merge({'class': 'col-form-label ' ~ class }) %}
        {% if value.vars.required -%}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {%- endif -%}
        {% if value.vars.label is empty -%}
            {%- if value.vars.label_format is not empty -%}
                {% set label = label_format|replace({
                    '%name%': value.vars.name,
                    '%id%': value.vars.id,
                }) %}
            {%- else -%}
                {% set label = value.vars.name|humanize %}
            {%- endif -%}
        {%- endif -%}

        <label {% if label_attr %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}{% endif %}>
            {{ label }}
            {% if value.vars.required -%}<span class="text-danger font-weight-bold">*</span>{% endif %}
            {% if value.vars.popover ?? false %}
                <span class="float-right">
                    &nbsp;
                    <i class="flaticon-questions-circular-button text-warning" data-toggle="popover"
                       data-content="{{ value.vars.popover }}" data-placement="top"></i>
                </span>
            {% endif %}
        </label>
    {% endif %}
{%- endmacro -%}

{% macro frm_label_single(value) %}
    {% if value.vars.label %}
        {{ value.vars.label | capitalize }}
    {% else %}
        {{ value.vars.name | capitalize }}
    {% endif %}
{% endmacro %}

{% macro frm_help(value) %}
    {% set help = value.vars.help %}
    {% set help_attr = value.vars.help_attr %}
    {%- if help is not empty -%}
        {%- set help_attr = help_attr|merge({class: (help_attr.class|default('') ~ ' m-form__help')|trim}) -%}

        <span id="{{ value.vars.id }}_help" {% for attrname, attrvalue in help_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
        {{ help }}
        </span>
    {%- endif -%}
{% endmacro %}

{% macro frm_btn(label, class='') %}
    {% import _self as actions %}
    <div class="form-group  row">
        <div class="{{ _class_horizontal_label }}"></div>
        <div class="{{ _class_horizontal_widget }}">
            {{ actions.btn_save(label) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_field_checkbox(value, class='', class_widget='') %}
    <span class="p-3 {{ class }}">
        <label class="m-checkbox">
            {{ form_widget(value, {attr: {class: '' ~ class_widget} }) }}
            {% if value.vars.label %}
                {{ value.vars.label | capitalize }}
            {% else %}
                {{ value.vars.name | capitalize }}
            {% endif %}
            <span></span>
        </label>
    </span>
{% endmacro %}

{% macro frm_field_checkbox_inline(value, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {{ actions.frm_label(value) }}
        <div class="col-sm-9">
            <div class="m-checkbox-inline">
                {% for child in value.vars.form.children %}
                    <label class="m-checkbox pr-3">
                        {{ form_widget(child, {attr: {class: '' ~ class_widget} }) }}
                        {{ actions.frm_label_single(child) }}
                        <span></span>
                    </label>
                {% endfor %}
            </div>
            {{ actions.frm_help(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_field_switch(value, class='', class_widget='', color='success') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {{ actions.frm_label(value) }}
        <div class="{{ _class_horizontal_widget }}">
                <span class="m-bootstrap-switch m-bootstrap-switch--pill">
                    {{ form_widget(value, {attr: {'class': '' ~ class_widget, 'data-switch': 'true', 'data-on-color':'success', 'data-on-text':'SI', 'data-off-text': 'NO' } }) }}
                </span>
            {% if value.vars.help %}<span class="m-form__help ml-2"> {{ value.vars.help }} </span>{% endif %}
        </div>
    </div>
{% endmacro %}

{% macro frm_field_select_widget(value, class_widget='') -%}
    {{ form_widget(value, {attr: {class: 'm-input' ~ class_widget} }) }}
{%- endmacro %}

{% macro frm_field_collection(value, class='', class_widget='', style='') -%}
    {% import _self as actions %}
    <div class="form-group  {{ class }} row">
        {% if value.vars.label %}
            {{ actions.frm_label(value) }}
        {% endif %}
        <div class="{% if value.vars.label %}col-md-9{% endif %} col-sm-12">
            <ul id="{{ value.vars.id }}" class="list-group"
                data-prototype="{{ form_widget(value.vars.prototype)|e }}"
                    {% if value.vars.prototype.vars.name %} data-prototype-name="{{ value.vars.prototype.vars.name }}" {% endif %}
                data-widget-tags="{{ '<li class="list-group-item"></li>'|e }}">
                {% for item in value %}
                    <li class="list-group-item {% if style != '' %}list-group-item-dark{% endif %}">
                        {{ form_errors(item) }}
                        {{ form_widget(item, {attr: {class: '' ~ class_widget} }) }}
                    </li>
                {% endfor %}
            </ul>
        </div>
        <div class="float-right" style="display: none;">
            {{ form_row(value) }}
        </div>
    </div>
{%- endmacro %}

{% macro frm_field_file(value, item=null,class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  {{ class }}" style="float: left;">
        {{ form_label(value,null,{label_attr: {class: 'col-form-label'} }) }}
        <div class="custom-file col-sm-12">
            {{ form_widget(value, {attr: {class: '' ~ class_widget} }) }}
            <label id="{{ value.vars.id }}-label" class="custom-file-label" for="{{ value.vars.id }}">Seleccione ...</label>
        </div>
    </div>
{% endmacro %}

{% macro frm_field_file_row(value, item=null,class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  {{ class }}">
        {{ actions.frm_label(value) }}
        <div class="custom-file {{ _class_horizontal_label }}">
            {{ form_widget(value, {attr: {class: '' ~ class_widget} }) }}
            <label class="custom-file-label" for="{{ value.vars.id }}">Seleccione ...</label>
        </div>
        {#<div class="custom-file col-lg-4 col-md-9 col-sm-12">
            {% if item %}
                <label class="">
                    {{ item.nombre }}
                </label>
            {% endif %}
        </div>#}
    </div>
{% endmacro %}

{% macro frm_field_textarea(value, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {{ actions.frm_label(value) }}
        <div class="col-lg-9 col-sm-12">
            {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget} }) }}
            {{ actions.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_field_two(value1, value2, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {% if value1 %}
            {{ actions.frm_label(value1) }}
            <div class="col-lg-3">
                {{ form_widget(value1, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
                {{ actions.frm_errors(value1) }}
            </div>
        {% endif %}
        {% if value2 %}
            {{ actions.frm_label(value2) }}
            <div class="col-lg-3">
                {{ form_widget(value2, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
                {{ actions.frm_errors(value2) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_field_two_without_label(value1, value2, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}" style="float: left;">
        {% if value1 %}
            {% if value1.vars.label %}{{ actions.frm_label(value1, 'col-sm-2') }}{% endif %}
            {% set mClass = (value1.vars.attr.class is defined) ? value1.vars.attr.class:'' %}
            <div class="col-sm-{% if value1.vars.label %}3{% else %}6{% endif %}">
                {{ form_widget(value1, {attr: {class: mClass ~ ' form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value2 %}
            {% if value2.vars.label %}{{ actions.frm_label(value2, 'col-sm-2') }}{% endif %}
            {% set mClass = (value2.vars.attr.class is defined) ? value2.vars.attr.class:'' %}
            <div class="col-sm-{% if value2.vars.label %}3{% else %}6{% endif %}">
                {{ form_widget(value2, {attr: {class: mClass ~ ' form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_field_two_with_label(value1, value2, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}">
        {% if value1 %}
            {% if value1.vars.label %}{{ actions.frm_label(value1, 'col-sm-3') }}{% endif %}
            <div class="col-sm-{% if value1.vars.label %}3{% else %}6{% endif %}">
                {{ form_widget(value1, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value2 %}
            {% if value2.vars.label %}{{ actions.frm_label(value2, 'col-sm-3') }}{% endif %}
            <div class="col-sm-{% if value2.vars.label %}3{% else %}6{% endif %}">
                {{ form_widget(value2, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_field_three(label,value1, value2, value3, class='', class_widget='') %}
    <div class="form-group  row {{ class }}">
        {{ form_label(value1,label, {label_attr: {class: 'col-lg-3 col-form-label'} }) }}
        <div class="col-sm-3">
            {% set myclass = 'form-control m-input ' %}
            {% if value1 is not null and value1.vars.attr is defined %}
                {% set myclass = value1.vars.attr.class is defined ? myclass ~ value1.vars.attr.class : myclass %}
            {% endif %}
            {{ form_widget(value1, {attr: {class: (myclass ~ class_widget) | trim} }) }}
        </div>
        <div class="col-sm-3">
            {% set myclass = 'form-control m-input ' %}
            {% if value2 is not null and value2.vars.attr is defined %}
                {% set myclass = value2.vars.attr.class is defined ? myclass ~ value2.vars.attr.class : myclass %}
            {% endif %}
            {{ form_widget(value2, {attr: {class: (myclass ~ class_widget) | trim} }) }}
        </div>
        <div class="col-sm-3">
            {% set myclass = 'form-control m-input ' %}
            {% if value3 is not null and value3.vars.attr is defined %}
                {% set myclass = value3.vars.attr.class is defined ? myclass ~ value3.vars.attr.class : myclass %}
            {% endif %}
            {{ form_widget(value3, {attr: {class: (myclass ~ class_widget) | trim} }) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_field_three_without_label(value1, value2, value3, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}" style="float: left;">
        {% if value1 %}
            {% if value1.vars.label %}{{ actions.frm_label(value1, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value1.vars.label %}3{% else %}4{% endif %}">
                {{ form_widget(value1, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value2 %}
            {% if value2.vars.label %}{{ actions.frm_label(value2, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value2.vars.label %}3{% else %}4{% endif %}">
                {{ form_widget(value2, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value3 %}
            {% if value3.vars.label %}{{ actions.frm_label(value3, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value3.vars.label %}3{% else %}4{% endif %}">
                {{ form_widget(value3, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_field_four_without_label(value1, value2, value3, value4, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row {{ class }}" style="float: left;">
        {% if value1 %}
            {% if value1.vars.label %}{{ actions.frm_label(value1, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value1.vars.label %}2{% else %}3{% endif %}">
                {{ form_widget(value1, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value2 %}
            {% if value2.vars.label %}{{ actions.frm_label(value2, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value2.vars.label %}2{% else %}3{% endif %}">
                {{ form_widget(value2, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value3 %}
            {% if value3.vars.label %}{{ actions.frm_label(value3, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value3.vars.label %}2{% else %}3{% endif %}">
                {{ form_widget(value3, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
        {% if value4 %}
            {% if value4.vars.label %}{{ actions.frm_label(value4, 'col-sm-2') }}{% endif %}
            <div class="col-sm-{% if value4.vars.label %}2{% else %}3{% endif %}">
                {{ form_widget(value4, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_errors(value) %}
    {%- if value is not null and value.vars.errors|length > 0 -%}
{#        <ul class="list-unstyled">#}
            {%- for error in value.vars.errors -%}
{#                <li class="m-form__help kt-font-danger">{{ error.message }}</li>#}
                <div class="error invalid-feedback">{{ error.message }}</div>
            {%- endfor -%}
{#        </ul>#}

    {%- endif -%}
{% endmacro %}

{% macro frm_errors_class(value) %}
    {%- if value is not null and value.vars.errors|length > 0 -%}
        validated is-invalid
    {%- endif -%}
{% endmacro %}

{% macro frm_column(section1, section2=null, section3=null, section4=null, num=1) %}
    {% import _self as actions %}
    <div class="row">
        {% if section1 or num >=1 %}
            <div class="col-sm p-0">
                {{ section1 }}
            </div>
        {% endif %}
        {% if section2 or num >=2 %}
            <div class="col-sm p-0">
                {{ section2 }}
            </div>
        {% endif %}
        {% if section3 or num >=3 %}
            <div class="col-sm p-0">
                {{ section3 }}
            </div>
        {% endif %}
        {% if section4 or num >=4 %}
            <div class="col-sm p-0">
                {{ section4 }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_column_field(value, class='', class_widget='', col=4) %}
    {% import _self as actions %}
    <div class="form-group  row mb-1 p-1 {{ class }} {{ actions.frm_errors_class(value) }}">
        {{ actions.frm_label(value,'col-sm-' ~ col ~ ' col-4 text-right') }}
        <div class="col-sm-{{ 12-col }} col-8">
            {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget ~ actions.frm_errors_class(value)} }) }}
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_date(value, class='', class_widget='', col=4) %}
    {% import _self as actions %}
    <div class="form-group  row mb-1 p-1 {{ class }} {{ actions.frm_errors_class(value) }}">
        {{ actions.frm_label(value,'col-sm-' ~ col ~ ' col-4 text-right') }}
        <div class="col-sm-{{ 12-col }} col-8">
            <div class="input-group date">
                {{ form_widget(value, {attr: {class: 'form-control m-input x_datepicker ' ~ class_widget ~ actions.frm_errors_class(value)} }) }}
                <div class="input-group-append">
                        <span class="input-group-text">
                            <i class="la la-calendar"></i>
                        </span>
                </div>
            </div>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_number(value, class='', class_widget='') %}
    <div class="form-group  row mb-1 p-1 {{ class }} {{ _self.frm_errors_class(value) }}">
        {{ _self.frm_label(value,'col-sm-4 col-4 text-right') }}
        <div class="col-sm-8 col-8">
            <div class="kt-input-icon kt-input-icon--left">
                {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget ~ _self.frm_errors_class(value)} }) }}
                <span class="kt-input-icon__icon kt-input-icon__icon--left">
                        <span><i class="la la-calculator"></i></span>
                    </span>
            </div>
            {{ _self.frm_help(value) }}
            {{ _self.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_ticket(value1, value2, class='', class_widget='') %}
    {% import _self as actions %}
    <div class="form-group  row mb-1 p-1 {{ class }}">
        {% if value1 and value2 %}
            {{ actions.frm_label(value2,'col-sm-4 col-4 text-right') }}
            <div class="col-md-3 col-4">
                {{ form_widget(value1, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
            <div class="col-md-5 col-4">
                {{ form_widget(value2, {attr: {class: 'form-control m-input ' ~ class_widget, 'autocomplete':'off'} }) }}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro frm_column_field_checkbox_inline(value, class='', class_widget='',col=4) %}
    {% import _self as actions %}
    <div class="form-group  row mb-1 p-1 {{ class }}">
        {% if value.vars.label != null and value.vars.label != false %}
            {{ actions.frm_label(value,'col-sm-' ~ col ~ ' col-4 text-right') }}
        {% endif %}
        <div class="col-sm-{{ 12-col }} col-8">
            <div class="kt-checkbox-inline">
                {% for child in value.vars.form.children %}
                    <label class="kt-checkbox kt-checkbox--primary pr-3">
                        {{ form_widget(child, {attr: {class: '' ~ class_widget} }) }}
                        {{ actions.frm_label_single(child) }}
                        <span></span>
                    </label>
                {% endfor %}
            </div>
            {{ actions.frm_help(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_radio_inline(value, class='', class_widget='',col=4) %}
    {% import _self as actions %}
    <div class="form-group  row mb-1 p-1 {{ class }}">
        {{ actions.frm_label(value,'col-sm-' ~ col ~ ' col-4 text-right') }}
        <div class="col-sm-{{ 12-col }} col-8">
            <div class="kt-radio-inline">
                {% for child in value.vars.form.children %}
                    <label class="kt-radio kt-radio--brand pr-3">
                        {{ form_widget(child, {attr: {class: '' ~ class_widget} }) }}
                        {{ actions.frm_label_single(child) }}
                        <span></span>
                    </label>
                {% endfor %}
            </div>
            {{ actions.frm_help(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_slider(value, class='', class_widget='', col=4) %}
    {% import _self as actions %}
    <div class="form-group  row p-2 {{ class }}">
        {{ actions.frm_label(value,'col-sm-'~col) }}
        <div class="col-sm-{{ 12-col }}">
            <div class="m-ion-range-slider">
                {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget} }) }}
            </div>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
        <script>
            jQuery(document).ready(function () {
                jQuery("#{{ value.vars.id }}").ionRangeSlider({
                    type: "single",
                    skin: "big",
                    grid: true,
                    grid_snap: true,
                    min: 6,
                    max: 10,
                    from: {{ value.vars.data ? : 6 }},
                    step: 0.25
                });
            });
        </script>
    </div>
{% endmacro %}

{% macro frm_column_field_slider_ui(value, class='', class_widget='', col=4) %}
    {% import _self as actions %}
    <div class="form-group  row align-items-center p-5 {{ class }}">
        {{ actions.frm_label(value,'col-sm-'~col) }}
        <div class="col-sm-2">
            {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget} }) }}
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
        <div class="col-sm-{{ 10-col }}">
            <div id="{{ value.vars.id }}_slider" class="m-nouislider m-nouislider--handle-danger"></div>
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_switch_custom(value, class='', class_widget='', col=4) %}
    {% import _self as actions %}
    <div class="form-group  row p-2 {{ class }}">
        {{ actions.frm_label(value,'col-sm-'~col) }}
        <div class="col-sm-{{ 12-col }}">
            <div class="row align-items-center">
                <div class="col-md-2 col-sm-3 col-xs-2">
                    {{ form_widget(value, {attr: {class: 'form-control m-input ' ~ class_widget} }) }}
                </div>
                <div id="{{ value.vars.id }}_switch" class="col-md-10 col-sm-9 col-xs-10">
                    {% if value.vars.data %}
                        {% for i in 1..value.vars.data/2 %}
                            <input type="checkbox" data-switch="true" data-size="small" class="x_switch" checked>
                        {% endfor %}
                        {% if value.vars.data < 10 %}
                            {% for i in 1..(10-value.vars.data)/2 %}
                                <input type="checkbox" data-switch="true" data-size="small" class="x_switch">
                            {% endfor %}
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
        <script>
            jQuery(document).ready(function () {
                jQuery('#{{ value.vars.id }}').prop('readOnly', true);
                jQuery('#{{ value.vars.id }}_switch [data-switch=true]').bootstrapSwitch({
                    size: 'small',
                    onColor: 'info',
                    onText: 'SI',
                    offText: 'NO',
                });

                jQuery('#{{ value.vars.id }}_switch [data-switch=true]').on('switchChange.bootstrapSwitch', function (event, state) {
                    let increment = state ? 2 : -2;
                    let val = parseInt(jQuery('#{{ value.vars.id }}').val());
                    jQuery('#{{ value.vars.id }}').val(val + increment);
                });
            });
        </script>
    </div>
{% endmacro %}

{% macro frm_column_field_collection(value, class='', class_widget='', style='', num=4) %}
    {% import _self as actions %}
    <div class="form-group row {{ class }}">
        {% if num > 0 %}
            {{ actions.frm_label(value,'col-sm-' ~ num ) }}
        {% endif %}
        <div class="col-sm-{{ 12-num }}">
            <ul id="{{ value.vars.id }}" class="list-group list-unstyled"
                data-prototype="{{ form_widget(value.vars.prototype)|e }}"
                    {% if value.vars.prototype.vars.name %} data-prototype-name="{{ value.vars.prototype.vars.name }}" {% endif %}
                data-widget-tags="{{ '<li class="list-group-item"></li>'|e }}">
                {% for item in value %}
                    <li class="list-group-item collection-item p-1" style="position: relative;">
                        {{ form_errors(item) }}
                        {{ form_widget(item, {attr: {class: '' ~ class_widget} }) }}
                    </li>
                {% endfor %}
            </ul>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_collection_files(value, class='', class_widget='', style='', num=4) %}
    {% import _self as actions %}
    <div class="form-group row {{ class }}">
        {% if num > 0 %}
            {{ actions.frm_label(value,'col-sm-' ~ num ) }}
        {% endif %}
        <div class="col-sm-{{ 12-num }}">
            <ul id="{{ value.vars.id }}" class="list-group list-unstyled"
                data-prototype="{{ form_widget(value.vars.prototype)|e }}"
                    {% if value.vars.prototype.vars.name %} data-prototype-name="{{ value.vars.prototype.vars.name }}" {% endif %}
                data-widget-tags="{{ '<li class="list-group-item"></li>'|e }}">
                {% for item in value %}
                    {% if item.vars.value %}
                    <li class="list-group-item collection-item p-1" style="position: relative;">
                        <a href="{{ path('adjunto_download', {'secure': item.vars.value.secure}) }}">{{ item.vars.value.nombre }}</a>
                        <div class="hidden">
                            {{ form_widget(item, {attr: {class: '' ~ class_widget} }) }}
                        </div>
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
        <div class="float-right" style="display: none;">
            {{ form_row(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_field_collection_files_img(value, class='', class_widget='', style='', num=4) %}
    {% import _self as actions %}
    <div class="form-group row {{ class }}">
        {% if num > 0 %}
            {{ actions.frm_label(value,'col-sm-' ~ num ) }}
        {% endif %}
        <div class="col-sm-{{ 12-num }}">
            <ul id="{{ value.vars.id }}" class="list-group list-unstyled"
                data-prototype="{{ form_widget(value.vars.prototype)|e }}"
                    {% if value.vars.prototype.vars.name %} data-prototype-name="{{ value.vars.prototype.vars.name }}" {% endif %}
                data-widget-tags="{{ '<li class="list-group-item"></li>'|e }}">
                {% for item in value %}
                    {% if item.vars.value %}
                        <li class="list-group-item collection-item p-1" style="position: relative;">
                            <a href="{{ path('adjunto_download', {'secure': item.vars.value.secure}) }}">
                                <img src="{{ asset(_media_directory ~ '/' ~ item.vars.value.secure) | imagine_filter('slider_thumb') }}" class="img-fluid">
                            </a>
                            <div class="hidden">
                                {{ form_widget(item, {attr: {class: '' ~ class_widget} }) }}
                            </div>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
            {{ actions.frm_help(value) }}
            {{ actions.frm_errors(value) }}
        </div>
        <div class="float-right" style="display: none;">
            {{ form_row(value) }}
        </div>
    </div>
{% endmacro %}

{% macro frm_column_btn(label, class='') %}
    {% import _self as actions %}
    <div class="form-group  row p-1 {{ class }}">
        <div class="col-sm-4"></div>
        <div class="col-sm-8">
            {{ actions.btn_save(label) }}
        </div>
    </div>
{% endmacro %}

{# ########## ALDAIR ################# #}

{% macro btn_delete_modal(link, token) %}
    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#m_modal_1"> Eliminar</button>
    <div class="modal fade" id="m_modal_1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Confirmacion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Â¿ Esta seguro de eliminar este registro?
                </div>
                <div class="modal-footer">

                    <form method="post" action="{{ link }}">
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="_token" value="{{ token }}">
                        <button class="btn">Delete</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{# ########## BLOQUES ################# #}
{% block attributes -%}
    {%- for attrname, attrvalue in attr -%}
        {{- " " -}}
        {%- if attrname in ['placeholder', 'title'] -%}
            {{- attrname }}="{{ translation_domain is same as(false) ? attrvalue : attrvalue|trans({}, translation_domain) }}"
        {%- elseif attrvalue is same as(true) -%}
            {{- attrname }}="{{ attrname }}"
        {%- elseif attrvalue is not same as(false) -%}
            {{- attrname }}="{{ attrvalue }}"
        {%- endif -%}
    {%- endfor -%}
{%- endblock attributes -%}

{# ########## DISPLAY ################# #}
{% macro tbl_start(class='table-sm table-head-custom table-head-bg table-vertical-center',attributes='') %}
    <table class="table {{ class }}" {{ attributes }}>
{% endmacro %}

{% macro tbl_end() %}
    </table>
{% endmacro %}

{% macro tbl_head(class='', value1, value2, value3, value4) %}
    <thead class="{{ class }}">
        {% if value1 %} {{ value1 }} {% endif %}
        {% if value2 %} {{ value2 }} {% endif %}
        {% if value3 %} {{ value3 }} {% endif %}
        {% if value4 %} {{ value4 }} {% endif %}
    </thead>
{% endmacro %}

{% macro tbl_tr(label, value, nullable=true, value2=null,value3=null,value4=null) %}
    {%- if value is not null or nullable == true -%}
        {% import _self as actions %}
        <tr>
            <th>{{ label }}</th>
            <td>{{ actions.display(value) }}</td>
            {% if value2 %}<td>{{ actions.display(value2) }}</td>{% endif %}
            {% if value3 %}<td>{{ actions.display(value3) }}</td>{% endif %}
            {% if value4 %}<td>{{ actions.display(value4) }}</td>{% endif %}
        </tr>
    {%- endif -%}
{% endmacro %}

{% macro tbl_th(nullable=true, head1=null, head2=null, head3=null, head4=null) %}
    {%- if head1 is not null or nullable == true -%}
        {% import _self as actions %}
        <tr>
            {% if head1 %}<th>{{ head1 | trans | upper }}</th>{% endif %}
            {% if head2 %}<th>{{ head2 | trans | upper }}</th>{% endif %}
            {% if head3 %}<th>{{ head3 | trans | upper }}</th>{% endif %}
            {% if head4 %}<th>{{ head4 | trans | upper }}</th>{% endif %}
        </tr>
    {%- endif -%}
{% endmacro %}

{% macro tbl_tr_td_multiple(label, values, nullable=true) %}
    {%- if values is iterable or nullable == true -%}
        {% import _self as actions %}
        <tr>
            <th>{{ label }}</th>
            {% for value in values %}
                <td>{{ actions.display(value) }}</td>
            {% endfor %}
        </tr>
    {%- endif -%}
{% endmacro %}

{% macro th(label, trans = false, class = '') %}
    {% if trans %}
        <th class="{{ class }}">{{ label | trans }}</th>
    {% else %}
        <th class="{{ class }}">{{ label }}</th>
    {% endif %}
{% endmacro %}

{% macro td(value, trans = false, class = '') %}
    {% if trans %}
        <td class="{{ class }}">{{ value | trans }}</td>
    {% else %}
        <td class="{{ class }}">{{ value }}</td>
    {% endif %}
{% endmacro %}

{% macro display(value) %}
    {% if value.timestamp is defined %}
        {{ value | fecha }}
    {% elseif value is iterable %}
        {% for item in value %}
            {{ item }},
        {% endfor %}
    {% else %}
        {{ value }}
    {% endif %}
{% endmacro %}

{% macro row(class='', value1, value2, value3, value4) %}
    <div class="row {{ class }}">
        {% if value1 %} {{ value1 }} {% endif %}
        {% if value2 %} {{ value2 }} {% endif %}
        {% if value3 %} {{ value3 }} {% endif %}
        {% if value4 %} {{ value4 }} {% endif %}
    </div>
{% endmacro %}

{% macro col(label, value, label_num=4, value_num=0, nullable=true) %}
    {%- if value is not null or nullable == true -%}
        {% import _self as actions %}
        <div class="col-sm-{{ label_num }}">
            <span>{{ label }}</span>
        </div>
        {% set value_num = (value_num != 0) ? value_num : 12 - label_num %}
        <div class="col-sm-{{ value_num }}">
            {{ actions.display(value) }}
        </div>
    {%- endif -%}
{% endmacro %}

{# ########## GRUPO DE BOTONES ################# #}
{%- macro gbtn_show_ico(entity, entity_id, links, enable_print=true) -%}
    {% import _self as actions %}
    {% if links.list %}
        {{ actions.btn_list_link_ico(path(entity ~'_index')) }}
    {% endif %}
    {% if links.new %}
        {{ actions.btn_new_link_ico(path(entity ~'_new')) }}
    {% endif %}
    {% if links.edit %}
        {{ actions.btn_edit_link_ico(path(entity ~'_edit', {'id': entity_id})) }}
    {% endif %}
    {% if links.print and enable_print == true %}
        {{ actions.btn_print_link_ico(path(entity ~'_print', {'id': entity_id})) }}
    {% endif %}
    {% if links.delete %}
        {{ actions.btn_delete_form_ico(path(entity ~'_delete', {'id': entity_id}), csrf_token('delete' ~ entity_id)) }}
    {% endif %}
{%- endmacro -%}

{%- macro gbtn_show(entity, entity_id, links, enable_print=true) -%}
    {% import _self as actions %}
    {% if links.list %}
        {{ actions.btn_list_link(path(entity ~'_index')) }}
    {% endif %}
    {% if links.new %}
        {{ actions.btn_new_link(path(entity ~'_new')) }}
    {% endif %}
    {% if links.edit %}
        {{ actions.btn_edit_link(path(entity ~'_edit', {'id': entity_id})) }}
    {% endif %}
    {% if links.print and enable_print == true %}
        {{ actions.btn_print_link(path(entity ~'_print', {'id': entity_id})) }}
    {% endif %}
    {% if links.delete %}
        {{ actions.btn_delete_form(path(entity ~'_delete', {'id': entity_id}), csrf_token('delete' ~ entity_id)) }}
    {% endif %}
{%- endmacro -%}

{%- macro gbtn_edit_ico(entity, entity_id, links) -%}
    {% import _self as actions %}
    {% if links.list %}
        {{ actions.btn_list_link_ico(path(entity ~'_index')) }}
    {% endif %}
    {% if links.new %}
        {{ actions.btn_new_link_ico(path(entity ~'_new')) }}
    {% endif %}
    {% if links.print %}
        {{ actions.btn_print_link_ico(path(entity ~'_print', {'id': entity_id})) }}
    {% endif %}
    {% if links.delete %}
        {{ actions.btn_delete_form_ico(path(entity ~'_delete', {'id': entity_id}), csrf_token('delete' ~ entity_id)) }}
    {% endif %}
{%- endmacro -%}

{# ########## MENUS ################# #}
{%- macro mnu_item(label, link='#', icon='flaticon2-box-1 kt-font-brand', class='') -%}
    <li class="kt-nav__item">
        <a href="{{ link }}" class="kt-nav__link {{ class }}">
            <i class="kt-nav__link-icon {{ icon }}"></i>
            <span class="kt-nav__link-text">{{ label | trans }}</span>
        </a>
    </li>
{%- endmacro -%}


{# ########## SPINNERS ################# #}
{%- macro spinner(style='brand') -%}
    kt-spinner kt-spinner--v2 kt-spinner--sm kt-spinner--{{ style }} kt-spinner--left kt-spinner--input
{%- endmacro -%}
