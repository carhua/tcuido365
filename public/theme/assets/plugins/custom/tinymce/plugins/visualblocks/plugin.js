!function(){"use strict";var o=function(o){var t=o;return{get:function(){return t},set:function(o){t=o}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(o,t,n){o.dom.toggleClass(o.getBody(),"mce-visualblocks"),n.set(!n.get()),function(o,t){o.fire("VisualBlocks",{state:t})}(o,n.get())},e=function(o,t,e){o.addCommand("mceVisualBlocks",function(){n(o,0,e)})},i=function(o,t,e){o.on("PreviewFormats AfterPreviewFormats",function(t){e.get()&&o.dom.toggleClass(o.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),o.on("init",function(){(function(o){return o.getParam("visualblocks_default_state",!1,"boolean")})(o)&&n(o,0,e)}),o.on("remove",function(){o.dom.removeClass(o.getBody(),"mce-visualblocks")})},c=function(o,t){return function(n){n.setActive(t.get());var e=function(o){return n.setActive(o.state)};return o.on("VisualBlocks",e),function(){return o.off("VisualBlocks",e)}}},u=function(o,t){o.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return o.execCommand("mceVisualBlocks")},onSetup:c(o,t)}),o.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return o.execCommand("mceVisualBlocks")},onSetup:c(o,t)})};t.add("visualblocks",function(t,n){var c=o(!1);e(t,n,c),u(t,c),i(t,n,c)})}();