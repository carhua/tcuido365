!function(){"use strict";var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(o,t,e){var n,s;o.dom.toggleClass(o.getBody(),"mce-visualblocks"),e.set(!e.get()),n=o,s=e.get(),n.fire("VisualBlocks",{state:s})},e=function(o,t){return function(e){e.setActive(t.get());var n=function(o){return e.setActive(o.state)};return o.on("VisualBlocks",n),function(){return o.off("VisualBlocks",n)}}};o.add("visualblocks",function(o,n){var s,i,c,u,l,a,r,m=(s=!1,{get:function(){return s},set:function(o){s=o}});c=m,(i=o).addCommand("mceVisualBlocks",function(){t(i,0,c)}),l=m,(u=o).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return u.execCommand("mceVisualBlocks")},onSetup:e(u,l)}),u.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return u.execCommand("mceVisualBlocks")},onSetup:e(u,l)}),r=m,(a=o).on("PreviewFormats AfterPreviewFormats",function(o){r.get()&&a.dom.toggleClass(a.getBody(),"mce-visualblocks","afterpreviewformats"===o.type)}),a.on("init",function(){a.getParam("visualblocks_default_state",!1,"boolean")&&t(a,0,r)}),a.on("remove",function(){a.dom.removeClass(a.getBody(),"mce-visualblocks")})})}();